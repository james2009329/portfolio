<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>James Lin - Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }

        body.dark-mode nav {
            background: rgba(26, 26, 26, 0.98);
            border-bottom: 1px solid #333;
        }

        body.dark-mode .nav-brand {
            color: #fff;
        }

        body.dark-mode .nav-links a {
            color: #aaa;
        }

        body.dark-mode .nav-links a:hover {
            color: #fff;
        }

        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode .project-item h3 {
            color: #fff;
        }

        body.dark-mode .project-item p,
        body.dark-mode p {
            color: #aaa;
        }

        body.dark-mode .project-image-container {
            background: #2a2a2a;
            border-color: #444;
        }

        body.dark-mode .about-content,
        body.dark-mode .contact-links a {
            color: #aaa;
        }

        body.dark-mode .contact-links a:hover {
            color: #fff;
        }

        body.dark-mode .modal-content {
            background: #1a1a1a;
            color: #e0e0e0;
        }

        body.dark-mode .modal-close {
            color: #aaa;
        }

        body.dark-mode .modal-close:hover {
            color: #fff;
        }

        body.dark-mode footer {
            border-top: 1px solid #333;
            color: #666;
        }

        body.dark-mode .modal-section p,
        body.dark-mode .modal-section ul {
            color: #aaa;
        }

        body.dark-mode .view-3d-btn {
            background: #fff;
            color: #000;
        }

        body.dark-mode .view-3d-btn:hover {
            background: #e0e0e0;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            padding: 1.5rem 3rem;
            border-bottom: 1px solid #eee;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #666;
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #000;
        }

        /* Hero */
        .hero {
            margin-top: 80px;
            padding: 6rem 3rem;
            text-align: center;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #000;
        }

        .hero p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.8;
        }

        /* Main Content */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem;
        }

        section {
            margin-bottom: 6rem;
        }

        h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 3rem;
            color: #000;
        }

        /* About Section */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 1.5rem;
            line-height: 1.9;
        }

        .about-image-placeholder {
            width: 100%;
            max-width: 600px;
            height: 400px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 1rem;
            margin: 2rem auto;
            border: 2px dashed #ddd;
        }

        /* Project Grid */
        .project-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 3rem;
            margin-top: 2rem;
        }

        .project-item {
            cursor: pointer;
            transition: transform 0.3s;
        }

        .project-item:hover {
            transform: translateY(-5px);
        }

        .project-image-container {
            width: 100%;
            height: 350px;
            background: #f5f5f5;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ddd;
        }

        .project-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .project-placeholder {
            color: #999;
            font-size: 0.9rem;
            text-align: center;
        }

        .project-item h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #000;
        }

        .project-item p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            max-width: 900px;
            margin: 4rem auto;
            background: #fff;
            border-radius: 8px;
            padding: 3rem;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #000;
        }

        .modal h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
        }

        .modal-images {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        @media (max-width: 768px) {
            .modal-images {
                grid-template-columns: 1fr;
            }
        }

        .modal-image-placeholder {
            width: 100%;
            height: 250px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            border: 2px dashed #ddd;
        }

        .modal-images img, .modal-images video {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .modal-section {
            margin: 2rem 0;
        }

        .modal-section h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #000;
        }

        .modal-section p, .modal-section ul {
            color: #555;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .modal-section ul {
            padding-left: 1.5rem;
        }

        .view-3d-btn {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.8rem 1.5rem;
            background: #000;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .view-3d-btn:hover {
            background: #333;
        }

        /* Contact */
        .contact-links {
            display: flex;
            gap: 2rem;
            font-size: 1.1rem;
        }

        .contact-links a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s;
        }

        .contact-links a:hover {
            color: #000;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem;
            color: #999;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }

        /* 3D Viewer Modal */
        .viewer-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
        }

        .viewer-modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .viewer-container {
            width: 90%;
            max-width: 1200px;
            height: 80%;
            background: #1a1a1a;
            border-radius: 8px;
            position: relative;
        }

        .viewer-canvas {
            width: 100%;
            height: 100%;
        }

        .close-viewer {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #fff;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            z-index: 10;
        }

        .loading-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav {
                padding: 1rem 1.5rem;
                flex-direction: column;
                gap: 1rem;
            }

            .hero {
                padding: 4rem 1.5rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            main {
                padding: 1.5rem;
            }

            .project-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .modal-content {
                margin: 2rem 1rem;
                padding: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-brand">James Lin</div>
        <ul class="nav-links">
            <li><a href="#about">About</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#contact">Email</a></li>
            <li><a href="https://www.linkedin.com/in/james-lin-72927a278/" target="_blank">LinkedIn</a></li>
        </ul>
    </nav>

    <!-- Hero -->
    <div class="hero" style="background-image: url('https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/TheAirshipTeam.png'); background-size: cover; background-position: center top; min-height: 85vh; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 3rem;">
        <div style="text-align: center; padding: 1.5rem 3rem; max-width: 700px;">
            <h1 style="font-size: 2.5rem; font-weight: 700; color: #000; margin-bottom: 1rem; -webkit-text-stroke: 3px white; paint-order: stroke fill;">PROJECT PORTFOLIO</h1>
            <p style="font-size: 1.1rem; color: #000; margin: 0; line-height: 1.6; -webkit-text-stroke: 2px white; paint-order: stroke fill; font-weight: 600;">Hi! I'm James, a high school student interested in Mechanical Engineering, 3D Printing, and Design</p>
        </div>
    </div>

    <main>
        <!-- About Section -->
        <section id="about">
            <h2>About</h2>
            <div class="about-content">
                <p>What drives me most is the opportunity to explore, create, and iterate. I'm motivated by projects that challenge me to think critically, collaborate effectively, and push the boundaries of what's possible. Aside from engineering, I enjoy drinking hot teas, playing tennis with my little sister, and taking walks with my dog Tofu!</p>
                
                <div style="margin: 2rem auto; max-width: 500px;">
                    <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Yippie.PNG" alt="Celebrating with Rizwan after DECA" style="width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <p style="font-size: 0.9rem; color: #999; margin-top: 0.5rem; text-align: center;">Celebrating with Rizwan after DECA competition</p>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects">
            <h2>Projects</h2>
            <div class="project-grid">
                <!-- NASA SEES -->
                <div class="project-item" onclick="openModal('nasa')">
                    <div class="project-image-container">
                        <div class="project-placeholder">[Add project image]</div>
                    </div>
                    <h3>NASA SEES - High-Altitude Airship</h3>
                    <p>CAD lead for prototype airship with sensors for Titan atmospheric investigation</p>
                </div>

                <!-- Nitinol Claw -->
                <div class="project-item" onclick="openModal('nitinol')">
                    <div class="project-image-container">
                        <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/ArmPic.png" alt="Nitinol Claw">
                    </div>
                    <h3>Nitinol-Driven Compliant Claw</h3>
                    <p>Nitinol-driven compliant claw mechanism researching efficiency and strength</p>
                </div>

                <!-- Dragster -->
                <div class="project-item" onclick="openModal('dragster')">
                    <div class="project-image-container">
                        <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/DragsterReal.png" alt="Dragster">
                    </div>
                    <h3>Dragster</h3>
                    <p>Aerodynamic dragster with optimized weight and wheel design</p>
                </div>

                <!-- Robot Dog -->
                <div class="project-item" onclick="openModal('robotdog')">
                    <div class="project-image-container">
                        <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/RoboDog.png" alt="Robot Dog">
                    </div>
                    <h3>Robot Dog</h3>
                    <p>Quadrupedal robot with autonomous movement capabilities</p>
                </div>

                <!-- Cell Project -->
                <div class="project-item" onclick="openModal('cell')">
                    <div class="project-image-container">
                        <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Tofu%20Playing.JPG" alt="Cell Project">
                    </div>
                    <h3>Specialized Cell Project</h3>
                    <p>Remote-controlled model with gearbox-driven motion</p>
                </div>

                <!-- Biology Project -->
                <div class="project-item" onclick="openModal('biology')">
                    <div class="project-image-container">
                        <img src="https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Macro%20Molecule%20projectGrill.PNG" alt="Biology Project">
                    </div>
                    <h3>Chicken Cannedwich</h3>
                    <p>Mock product packaging for biology class project</p>
                </div>

                <!-- Solar Sprint -->
                <div class="project-item" onclick="openModal('solar')">
                    <div class="project-image-container">
                        <div class="project-placeholder">[Add project image]</div>
                    </div>
                    <h3>Senior Solar Sprint</h3>
                    <p>Solar-powered RC car with custom 3D-printed components</p>
                </div>

                <!-- Air Filter -->
                <div class="project-item" onclick="openModal('filter')">
                    <div class="project-image-container">
                        <div class="project-placeholder">[Add project image]</div>
                    </div>
                    <h3>2-Stage Carbon Air Filter</h3>
                    <p>3D printed air filter housing for VOC removal</p>
                </div>

                <!-- 3D Printer Mods -->
                <div class="project-item" onclick="openModal('mods')">
                    <div class="project-image-container">
                        <div class="project-placeholder">[Add project image]</div>
                    </div>
                    <h3>3D Printer Modifications</h3>
                    <p>Repaired and modified QIDI X-plus printer</p>
                </div>

                <!-- Custom Printer -->
                <div class="project-item" onclick="openModal('printer')">
                    <div class="project-image-container">
                        <div class="project-placeholder">[Add project image]</div>
                    </div>
                    <h3>Custom 3D Printer</h3>
                    <p>Building from scratch with custom upgrades</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact">
            <h2>Contact</h2>
            <div class="about-content">
                <h3 style="font-size: 1.3rem; margin-bottom: 1rem;">Email Addresses</h3>
                <div style="background: #f5f5f5; padding: 2rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <p style="margin-bottom: 1rem;"><strong>Primary (Preferred):</strong></p>
                    <p style="font-size: 1.1rem; margin-bottom: 2rem;"><a href="mailto:james2009329@gmail.com" style="color: #000; text-decoration: underline;">james2009329@gmail.com</a></p>
                    
                    <p style="margin-bottom: 1rem;"><strong>School Email:</strong></p>
                    <p style="font-size: 1.1rem; margin-bottom: 1rem;"><a href="mailto:Jlin02@student.dasd.org" style="color: #000; text-decoration: underline;">Jlin02@student.dasd.org</a></p>
                    <p style="font-size: 0.9rem; color: #666; font-style: italic;">Note: Some emails may be blocked if sent to my school email due to school filtering. Please use my personal email above for reliable contact.</p>
                </div>
                
                <div class="contact-links">
                    <a href="https://www.linkedin.com/in/james-lin-72927a278/" target="_blank">LinkedIn</a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 James Lin. All rights reserved.</p>
        <p style="margin-top: 0.5rem;">Site layout assisted by AI, all projects and insights are my own.</p>
        <button id="theme-toggle" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">
            <i class="fas fa-sun"></i> Light Mode
        </button>
    </footer>

    <!-- Project Modal -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">Ã—</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- 3D Viewer -->
    <div id="viewer-modal" class="viewer-modal">
        <div class="viewer-container">
            <button class="close-viewer" onclick="close3DViewer()">Close</button>
            <div class="loading-text" id="loading-text">
                <div class="spinner"></div>
                <div>Loading 3D model...</div>
            </div>
            <canvas id="viewer-canvas" class="viewer-canvas"></canvas>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const projectData = {
            'nasa': {
                title: 'NASA SEES - High-Altitude Airship',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Flight!.mp4',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Swift%20Turn.mp4',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/MotorTest.mp4'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Project Role</h3>
                        <p>CAD lead for prototype airship with sensors for Titan atmospheric investigation.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Responsibilities</h3>
                        <ul>
                            <li>Designed main gondola, rear vectoring propeller, and skis in Fusion360</li>
                            <li>Ensured electronics fit and created presentation animations</li>
                            <li>Conducted CFD modeling simulating Earth and Titan conditions</li>
                        </ul>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Testing & Results</h3>
                        <p>Successfully tested the rear vectoring propeller motor system and conducted multiple flight tests including turning maneuvers.</p>
                        <p><a href="https://youtu.be/NFG9HDeTTIg?si=Bp6K-PbthUrTKI15" target="_blank" style="color: #000; text-decoration: underline;">Watch Full Presentation</a></p>
                    </div>
                `
            },
            'nitinol': {
                title: 'Nitinol-Driven Compliant Claw',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/ArmPic.png',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Gears!.png'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Collaborating on a nitinol-driven compliant claw mechanism, researching efficiency and strength, bridging mechanical and electrical engineering.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Mechanical Design</h3>
                        <p>The underside of the arm features an intricate gear system that drives the claw's directional movement. The gears provide precise control and mechanical advantage for the nitinol actuators.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Key Features</h3>
                        <ul>
                            <li>Nitinol wire actuation for shape memory effect</li>
                            <li>Compliant mechanism design for smooth motion</li>
                            <li>Gear-driven directional control system</li>
                            <li>Integration of mechanical and electrical systems</li>
                        </ul>
                    </div>
                `
            },
            'dragster': {
                title: 'Dragster',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/DragsterReal.png',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Dragster%20Weight.png',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Dragster%20Underside.png',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Wheel%20Weight.png',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Single%20Wheel%20Weight.png'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Materials</h3>
                        <ul>
                            <li>Steel axles with graphite lubricant</li>
                            <li>Glass fiber impregnated PETG body and wheels</li>
                            <li>Clear spray paint finish</li>
                        </ul>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Design</h3>
                        <p>Maximized aerodynamic efficiency by minimizing drag. Front wheels recessed, rear tapered, fully enclosed wheels. Internal ribs and hole modifications increased stiffness and minimized friction.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Weight Optimization</h3>
                        <p><strong>Current:</strong> 70 grams | <strong>Target:</strong> 50 grams</p>
                        <p>Optimized slicing by decreasing infill and wall width. Made wheels smaller and thinner while maintaining structural integrity. Currently reprinting to meet target weight.</p>
                    </div>
                    
                    <button class="view-3d-btn" onclick="closeModal(); open3DViewer('dragster')">View 3D Model</button>
                `
            },
            'robotdog': {
                title: 'Robot Dog',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/RoboDog.png'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Developing a quadrupedal robot integrating mechanical design, electrical systems, and programming for autonomous movement.</p>
                    </div>
                    
                    <button class="view-3d-btn" onclick="closeModal(); open3DViewer('robotdog')">View 3D Model</button>
                `
            },
            'cell': {
                title: 'Specialized Cell Project',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Tofu%20Playing.JPG',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/SignsOfLife.mp4',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Spin!.mp4'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Created a remote-controlled sperm model with a gearbox for realistic flagellum rotation, using hidden wheels and motors for directional movement.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Technical Features</h3>
                        <ul>
                            <li>Custom gearbox for flagellum rotation mechanism</li>
                            <li>Hidden wheel and motor system for navigation</li>
                            <li>Remote control integration</li>
                            <li>Spinning and directional movement capabilities</li>
                        </ul>
                    </div>
                `
            },
            'biology': {
                title: 'Chicken Cannedwich',
                images: [
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Macromolecule%20project.PNG',
                    'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Macro%20Molecule%20projectGrill.PNG'
                ],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Created the "Chicken Cannedwich" - a chicken sandwich in a can designed for truckers. Designed custom modular packaging using CAD and 3D printing for a biology class project.</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>Product Design</h3>
                        <ul>
                            <li>Mock Instagram promotional posts</li>
                            <li>3D printed packaging prototypes</li>
                            <li>Multiple flavor variants including grilled version</li>
                        </ul>
                    </div>
                `
            },
            'solar': {
                title: 'Senior Solar Sprint',
                images: [],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Engineered a solar-powered RC car and reverse-engineered a missing SPDT switch by designing and 3D-printing a replacement.</p>
                    </div>
                `
            },
            'filter': {
                title: '2-Stage Carbon Air Filter',
                images: [],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Designed and 3D printed housing for activated charcoal pellets to trap VOCs and improve air quality.</p>
                    </div>
                `
            },
            'mods': {
                title: '3D Printer Modifications',
                images: [],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Repaired QIDI X-plus from garage sale and extensively modified the printer for improved performance.</p>
                    </div>
                `
            },
            'printer': {
                title: 'Custom 3D Printer',
                images: [],
                content: `
                    <div class="modal-section">
                        <h3>Overview</h3>
                        <p>Building and modifying a 3D printer from scratch with upgraded mechanical components.</p>
                    </div>
                    
                    <button class="view-3d-btn" onclick="closeModal(); open3DViewer('printer')">View 3D Model</button>
                `
            }
        };

        function openModal(projectId) {
            const modal = document.getElementById('project-modal');
            const modalBody = document.getElementById('modal-body');
            const project = projectData[projectId];
            
            if (!project) return;
            
            let imagesHTML = '';
            if (project.images && project.images.length > 0) {
                imagesHTML = '<div class="modal-images">';
                project.images.forEach(img => {
                    if (img.endsWith('.mp4') || img.endsWith('.mov')) {
                        imagesHTML += `<video controls><source src="${img}" type="video/mp4"></video>`;
                    } else {
                        imagesHTML += `<img src="${img}" alt="${project.title}">`;
                    }
                });
                imagesHTML += '</div>';
            }
            
            modalBody.innerHTML = `
                <h2>${project.title}</h2>
                ${imagesHTML}
                ${project.content}
            `;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('project-modal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // STLLoader
        THREE.STLLoader = function(manager) {
            this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;
        };

        THREE.STLLoader.prototype = {
            constructor: THREE.STLLoader,
            load: function(url, onLoad, onProgress, onError) {
                var scope = this;
                var loader = new THREE.FileLoader(scope.manager);
                loader.setResponseType('arraybuffer');
                loader.load(url, function(data) {
                    onLoad(scope.parse(data));
                }, onProgress, onError);
            },
            parse: function(data) {
                function isBinary(data) {
                    var reader = new DataView(data);
                    var face_size = (32 / 8 * 3) + ((32 / 8 * 3) * 3) + (16 / 8);
                    var n_faces = reader.getUint32(80, true);
                    var expect = 80 + (32 / 8) + (n_faces * face_size);
                    return expect === reader.byteLength;
                }

                function parseBinary(data) {
                    var reader = new DataView(data);
                    var faces = reader.getUint32(80, true);
                    var dataOffset = 84;
                    var faceLength = 12 * 4 + 2;
                    var geometry = new THREE.BufferGeometry();
                    var vertices = new Float32Array(faces * 3 * 3);
                    var normals = new Float32Array(faces * 3 * 3);

                    for (var face = 0; face < faces; face++) {
                        var start = dataOffset + face * faceLength;
                        var normalX = reader.getFloat32(start, true);
                        var normalY = reader.getFloat32(start + 4, true);
                        var normalZ = reader.getFloat32(start + 8, true);

                        for (var i = 1; i <= 3; i++) {
                            var vertexstart = start + i * 12;
                            var index = (face * 3 * 3) + ((i - 1) * 3);
                            vertices[index] = reader.getFloat32(vertexstart, true);
                            vertices[index + 1] = reader.getFloat32(vertexstart + 4, true);
                            vertices[index + 2] = reader.getFloat32(vertexstart + 8, true);
                            normals[index] = normalX;
                            normals[index + 1] = normalY;
                            normals[index + 2] = normalZ;
                        }
                    }

                    geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3));
                    geometry.setAttribute('normal', new THREE.BufferAttribute(normals, 3));
                    return geometry;
                }

                return isBinary(data) ? parseBinary(data) : null;
            }
        };

        // 3D Viewer
        let scene, camera, renderer, currentModel, animationId;

        const modelUrls = {
            'dragster': 'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Wind%20tunnel%20Dragster.stl',
            'robotdog': 'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/Robo%20Dog.stl',
            'printer': 'https://raw.githubusercontent.com/james2009329/portfolio/refs/heads/main/3D-Printer.stl'
        };

        function open3DViewer(modelType) {
            const modal = document.getElementById('viewer-modal');
            modal.classList.add('active');
            document.getElementById('loading-text').style.display = 'block';
            initViewer(modelType);
        }

        function close3DViewer() {
            const modal = document.getElementById('viewer-modal');
            modal.classList.remove('active');
            if (animationId) cancelAnimationFrame(animationId);
            if (renderer) renderer.dispose();
            if (scene && currentModel) scene.remove(currentModel);
        }

        function initViewer(modelType) {
            const canvas = document.getElementById('viewer-canvas');
            const container = canvas.parentElement;
            const loadingText = document.getElementById('loading-text');

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a1a);

            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 10000);
            camera.position.z = 150;

            renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            const loader = new THREE.STLLoader();
            
            loader.load(
                modelUrls[modelType],
                function(geometry) {
                    loadingText.style.display = 'none';

                    geometry.computeBoundingBox();
                    const center = new THREE.Vector3();
                    geometry.boundingBox.getCenter(center);
                    geometry.translate(-center.x, -center.y, -center.z);

                    const material = new THREE.MeshStandardMaterial({ 
                        color: 0xcccccc,
                        metalness: 0.3,
                        roughness: 0.5
                    });

                    currentModel = new THREE.Mesh(geometry, material);
                    scene.add(currentModel);

                    const bbox = geometry.boundingBox;
                    const size = bbox.getSize(new THREE.Vector3());
                    const maxDim = Math.max(size.x, size.y, size.z);
                    camera.position.z = maxDim * 2.5;
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Load error:', error);
                    loadingText.innerHTML = '<div style="color:#fff;">Error loading model</div>';
                }
            );

            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            canvas.addEventListener('mousemove', (e) => {
                if (isDragging && currentModel) {
                    const deltaX = e.clientX - previousMousePosition.x;
                    const deltaY = e.clientY - previousMousePosition.y;
                    currentModel.rotation.y += deltaX * 0.01;
                    currentModel.rotation.x += deltaY * 0.01;
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                }
            });

            canvas.addEventListener('mouseup', () => { isDragging = false; });
            canvas.addEventListener('wheel', (e) => {
                e.preventDefault();
                camera.position.z += e.deltaY * 0.1;
                camera.position.z = Math.max(10, Math.min(1000, camera.position.z));
            });

            function animate() {
                animationId = requestAnimationFrame(animate);
                if (!isDragging && currentModel) currentModel.rotation.y += 0.005;
                renderer.render(scene, camera);
            }
            animate();
        }
    </script>
    <script>
        // Dark mode toggle - Default to dark mode
        document.body.classList.add('dark-mode');
        
        const themeToggle = document.getElementById('theme-toggle');
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
            }
        });
    </script>
</body>
</html>
